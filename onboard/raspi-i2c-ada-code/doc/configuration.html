<html>
<head>
<title>Raspberry Pi I2C in Ada: Configuration</title>
<link href="simonjwright.css" rel="stylesheet" type="text/css"/>
</head>
<body>

<div id="header">
<a
href="http://sourceforge.net"><img
src="http://sourceforge.net/sflogo.php?group_id=135558&amp;type=1"
width="88" height="31" border="0" alt="SourceForge.net Logo" /></a>
</div>

<h1><a href="https://sourceforge.net/projects/raspi-i2c-ada/">Raspberry
Pi I2C in Ada</a>: Configuration</h1>

<p>Starting from
the <a href="http://nathan.chantrell.net/20120602/raspberry-pi-io-expander-board/#more-2814">suggestions
at Nathan Chantrell's blog</a> (he
inspired <a href="http://shop.ciseco.co.uk">Ciseco</a>'s <a href="http://openmicros.org/index.php/articles/94-ciseco-product-documentation/raspberry-pi/223-slice-of-pio">Slice
of PI/O</a>), I installed the package <tt>python-smbus</tt>, which
automatically installed <tt>i2c-tools</tt> and
recommended <tt>libi2c-dev</tt>, which I installed.

<p>On the Ada side, I installed the packages <tt>gnat</tt>
and <tt>gprbuild</tt> (which is needed to build a library with mixed
Ada and C code).

<p>I edited <tt>/etc/modprobe.d/raspi-blacklist.conf</tt> to enable
I2C in the Broadcom chip - I just commented-out the last line,

<pre>
   # blacklist spi and i2c by default (many users don't need them)

   blacklist spi-bcm2708
   #blacklist i2c-bcm2708
</pre>

<p>I added the line <tt>i2c-dev</tt> to <tt>/etc/modules</tt>. After a
reboot, the device files <tt>/dev/i2c-0</tt> and <tt>/dev/i2c-1</tt>
were present, in group <tt>i2c</tt> (this group may have been created
when <tt>i2c-tools</tt> was installed).

<p>I added myself to the <tt>i2c</tt> group, so I don't need to
use <tt>sudo</tt> to run any of the <tt>i2c-tools</tt>: <tt>sudo
adduser simon i2c</tt> (elsewhere I've seen <tt>sudo usermod -a -G i2c
simon</tt> suggested).

</body>
</html>
